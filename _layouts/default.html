<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ site.description }}">
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  {% feed_meta %}
  <script>
    (function() {
      const theme = localStorage.getItem('theme') || 'auto';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
</head>
<body>
  <button class="theme-toggle" aria-label="Toggle theme">
    <i class="fas fa-moon"></i>
    <i class="fas fa-sun"></i>
  </button>
  {{ content }}
  <script>
    (function() {
      const toggle = document.querySelector('.theme-toggle');
      const html = document.documentElement;
      
      function getEffectiveTheme() {
        const current = html.getAttribute('data-theme');
        if (current === 'auto') {
          return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        return current;
      }
      
      toggle.addEventListener('click', function() {
        const effective = getEffectiveTheme();
        const newTheme = effective === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });
    })();
  </script>
</body>
</html>
